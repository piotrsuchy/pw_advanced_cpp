@startuml

' ==========================
'  Classes & Relationships
' ==========================

' Game / Scene / Maze
class Game {
    + run()
    + processEvents()
    + update(deltaTime : float)
    + render()
    --
    - sceneManager : SceneManager
    - resourceManager : ResourceManager
}

' sf - Simple and Fast Multimedia Library
class Scene {
    + handleEvent(event : sf::Event)
    + update(deltaTime : float)
    + render(window : sf::RenderWindow)
    --
    <<abstract>>
}

class InGameScene {
    + handleEvent(event : sf::Event)
    + update(deltaTime : float)
    + render(window : sf::RenderWindow)
    --
    - maze : Maze
    - entities : vector<Entity*>
    - player : Player
    - ghosts : vector<Ghost>
    - networkManager : NetworkManager
}

class Maze {
    + isWall(tileX : int, tileY : int) : bool
    + hasPellet(tileX : int, tileY : int) : bool
    + hasPowerPellet(tileX : int, tileY : int) : bool
    + eatPellet(tileX : int, tileY : int)
    + tileToWorld(tileX : int, tileY : int) : sf::Vector2f
    + worldToTile(x : float, y : float) : sf::Vector2i
    --
    - tiles : 2D array / vector<vector<int>>
    - TILE_SIZE : float
}


' Entities
class Entity {
    + update(deltaTime : float)
    + render(window : sf::RenderWindow)
    + onCollision(other : Entity)
    + getPosition() : sf::Vector2f
    + setPosition(pos : sf::Vector2f)
    + getBounds() : sf::FloatRect
    --
    # position_ : sf::Vector2f
    # velocity_ : sf::Vector2f
    --
    <<abstract>>
}

class Player {
    + Player(startPos : sf::Vector2f)
    + update(deltaTime : float)
    + render(window : sf::RenderWindow)
    + onCollision(other : Entity)
    + addScore(points : int)
    + setDirection(dir : Direction)
    --
    - score_ : int
    - isPoweredUp_ : bool
    - powerUpTimer_ : float
}

class Ghost {
    + Ghost(startPos : sf::Vector2f)
    + update(deltaTime : float)
    + render(window : sf::RenderWindow)
    + onCollision(other : Entity)
    + setFrightened(isFrightened : bool)
    --
    - isFrightened_ : bool
    - frightenedTimer_ : float
}

class Pellet {
    + Pellet(pos : sf::Vector2f, isPower : bool)
    + update(deltaTime : float)
    + render(window : sf::RenderWindow)
    + onCollision(other : Entity)
    + isPowerPellet() : bool
    --
    - isPowerPellet_ : bool
}

' NETWORK MANAGER
class NetworkManager {
    + initializeServer(port : unsigned short) : bool
    + initializeClient(address : string, port : unsigned short) : bool
    + update(deltaTime : float)
    + sendPlayerState(playerId : int, x : float, y : float, score : int)
    --
    - isServer_ : bool
    - listener_ : sf::TcpListener
    - socket_ : sf::TcpSocket
    - clients_ : map<int, sf::TcpSocket*>
    - messageQueue_ : queue<sf::Packet>
}

' ==========================
'  Inheritance & Associations
' ==========================

' Scenes
Scene <|-- InGameScene

' Entities
Entity <|-- Player
Entity <|-- Ghost
Entity <|-- Pellet

' Maze usage
InGameScene -> Maze : uses

' InGameScene references network manager
InGameScene -> NetworkManager : uses

' example: the Game might hold a "current Scene", or manage multiple Scenes
Game -> "1..*" Scene : manages

@enduml
